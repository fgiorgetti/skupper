---
skupper:
  name: "west"
  console: "true"
  console-authentication: "internal"
  router-logging: "info"
  router-mode: "interior"
  type: "kubernetes" # any of: kubernetes, systemd, podman, docker
  kubernetes:
    ingress: "loadbalancer"
    service-controller: "true"
    service-sync: "true"
    create-network-policy: "true"
    routers: 1
  services:
    - address: "frontend"
      protocol: "http"
      ports:
        - 8080: 8080
      kubernetes:
        waitTargetAvailable: true
        dependsOn:
          - "backend"
        target:
          selectors:
            - app: "frontend"
  # without an external credential provider there is no reason to declare
  # links/credentials as links will be automatically defined once a secret is created
  links:
    - name: "east"
      host: "10.0.0.1"
      port: 443
      credential: "east"
  credentials:
    - name: "east"
      type: "internal"
---
skupper:
  name: "east"
  console: "true"
  console-authentication: "internal"
  router-logging: "info"
  router-mode: "interior"
  type: "kubernetes" # any of: kubernetes, systemd, podman, docker
  kubernetes:
    ingress: "loadbalancer"
    service-controller: "true"
    service-sync: "true"
    create-network-policy: "true"
    routers: 1
  services:
    - address: "backend"
      protocol: "http"
      ports:
        - 8080: 8080
      kubernetes:
        waitTargetAvailable: true
        target:
          selectors:
            - app: "backend"
---
skupper:
  name: "systemd-east"
  console: "true"
  console-authentication: "internal"
  router-logging: "info"
  router-mode: "interior"
  type: "systemd"
  services:
    - address: "my-db"
      protocol: "tcp"
      ports:
        - 1234: 1234
      systemd:
        mapping:
          host: 10.0.0.1
          port: 1234
  port-forwards:
    - address: "frontend"
      hosts:
        - 127.0.0.1
      ports:
        - 8080
  links:
    - name: "east"
      host: "host.domain"
      port: 8443
      credential: "east"
  credentials:
    - name: "east"
      type: "internal"
